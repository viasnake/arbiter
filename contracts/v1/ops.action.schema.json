{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raw.githubusercontent.com/viasnake/arbiter/v1.2.0/contracts/v1/ops.action.schema.json",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "action_id",
    "type",
    "provider",
    "operation",
    "params",
    "risk",
    "requires_approval",
    "idempotency_key"
  ],
  "properties": {
    "action_id": { "type": "string", "minLength": 1 },
    "type": { "enum": ["notify", "write_external", "start_job"] },
    "provider": { "type": "string", "minLength": 1 },
    "operation": { "type": "string", "minLength": 1 },
    "params": { "type": "object", "additionalProperties": true },
    "risk": { "enum": ["low", "medium", "high"] },
    "requires_approval": { "type": "boolean" },
    "idempotency_key": { "type": "string", "minLength": 1 }
  }
}
